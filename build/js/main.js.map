{"version":3,"sources":["input-validating.js","modal.js","server-request.js"],"names":["PATTERN","keyCodeProcessing","evt","code","keyCode","pos","selectionStart","preventDefault","i","def","replace","val","value","newValue","a","length","charAt","indexOf","slice","reg","substr","RegExp","test","type","inputProcessing","input","addEventListener","inputPhoneHolder","inputPhone","document","querySelector","window","modal","modalExitBtn","modalEscapeBtn","MODAL_CLASS_CLOSED","MODAL_OVERLAY","openModal","openBlock","initModalButtons","focus","escapeHandler","overlayClickHandler","closeModal","closeBlock","stopInitModalButtons","modalExitBtnClickHandler","modalEscapeBtnClickHandler","removeEventListener","closeCurrentTest","element","target","classList","contains","jsonTestData","serverAjaxRequest","request","XMLHttpRequest","open","send","readyState","status","JSON","parse","response","setTestName"],"mappings":"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","file":"main.js","sourcesContent":["/* eslint-disable no-invalid-this */\n\n// input-validating.js\n\n'use strict';\n\n(function () {\n  let PATTERN = '+7 (___) ___ ____';\n\n  function keyCodeProcessing(evt) {\n    if (evt.code === 'Tab') {\n      return;\n    }\n\n    let keyCode;\n    if (evt.keyCode) {\n      keyCode = evt.keyCode;\n      let pos = this.selectionStart;\n      if (pos < 3) evt.preventDefault();\n      let i = 0;\n      let def = PATTERN.replace(/\\D/g, '');\n      let val = this.value.replace(/\\D/g, '');\n      let newValue = PATTERN.replace(/[_\\d]/g, function (a) {\n        return i < val.length ? val.charAt(i++) || def.charAt(i) : a;\n      });\n      i = newValue.indexOf('_');\n      if (i !== -1) {\n        if (i < 5) {\n          i = 3;\n        }\n        newValue = newValue.slice(0, i);\n      }\n      let reg = PATTERN.substr(0, this.value.length)\n        .replace(/_+/g, function (a) {\n          return '\\\\d{1,' + a.length + '}';\n        })\n        .replace(/[+()]/g, '\\\\$&');\n      reg = new RegExp('^' + reg + '$');\n      if (!reg.test(this.value) || this.value.length < 5 || (keyCode > 47 && keyCode < 58)) this.value = newValue;\n      if (evt.type === 'blur' && this.value.length < 5) this.value = '';\n    }\n  }\n\n  function inputProcessing(input) {\n    input.addEventListener('input', keyCodeProcessing, false);\n    input.addEventListener('focus', keyCodeProcessing, false);\n    input.addEventListener('blur', keyCodeProcessing, false);\n    input.addEventListener('keydown', keyCodeProcessing, false);\n  }\n\n  function inputPhoneHolder() {\n    let inputPhone = document.querySelector('input[type=\"tel\"]');\n    inputProcessing(inputPhone);\n  }\n\n  window.addEventListener('DOMContentLoaded', inputPhoneHolder);\n})();\n","/* eslint-disable no-invalid-this */\n/* eslint-disable no-console */\n'use strict';\n\nlet modal = document.querySelector('.modal');\nlet modalExitBtn = document.querySelector('.modal__exit-button');\nlet modalEscapeBtn = document.querySelector('.modal__escape-button');\n\nconst MODAL_CLASS_CLOSED = 'modal--closed';\nconst MODAL_OVERLAY = 'modal';\n\nfunction openModal() {\n  if (modal) {\n    openBlock(modal, MODAL_CLASS_CLOSED);\n    initModalButtons();\n    modalEscapeBtn.focus();\n\n    // подключаем обработчик 'escape' закрытия модального\n    window.addEventListener('keydown', escapeHandler);\n    modal.addEventListener('click', overlayClickHandler);\n  }\n}\n\nfunction closeModal() {\n  closeBlock(modal, MODAL_CLASS_CLOSED);\n  stopInitModalButtons();\n}\n\nfunction initModalButtons() {\n  if (modalExitBtn) {\n    modalExitBtn.addEventListener('click', modalExitBtnClickHandler);\n  }\n  if (modalEscapeBtn) {\n    modalEscapeBtn.addEventListener('click', modalEscapeBtnClickHandler);\n  }\n}\n\nfunction stopInitModalButtons() {\n  modalExitBtn.removeEventListener('click', modalExitBtnClickHandler);\n  modalEscapeBtn.removeEventListener('click', modalEscapeBtnClickHandler);\n}\n\nfunction modalExitBtnClickHandler() {\n  closeModal();\n  closeCurrentTest();\n  stopInitModalButtons();\n}\n\nfunction modalEscapeBtnClickHandler() {\n  closeModal();\n  stopInitModalButtons();\n}\n\n// обработчики клавиши escape\nfunction escapeHandler(evt) {\n  if (evt.code === 'Escape') {\n    evt.preventDefault();\n    modalEscapeBtnClickHandler();\n  }\n}\n\n// обработчик клика по overlay-области\nfunction overlayClickHandler(evt) {\n  let element = evt.target;\n\n  if (element.classList.contains(MODAL_OVERLAY)) {\n    modalEscapeBtnClickHandler();\n  } else {\n    return;\n  }\n}\n","/* eslint-disable no-console */\n/* eslint-disable no-invalid-this */\n'use strict';\n\nlet jsonTestData;\n\nfunction serverAjaxRequest() {\n  let request = new XMLHttpRequest();\n  // request.open('GET', 'http://intas-site/test_data.php');\n  request.open('GET', 'https://demindesign.ru/intas-test/tests.php');\n  request.send();\n  request.addEventListener('readystatechange', function () {\n    if (request.readyState === 4 && request.status === 200) {\n      jsonTestData = JSON.parse(request.response);\n      setTestName();\n    }\n  });\n}\n"]}